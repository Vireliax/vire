<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Discord Embed Generator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    /* --- Base & Variables --- */
    :root {
      --font-primary: 'Inter', Arial, sans-serif;
      --bg-darkest: #202225; /* Discord Darkest */
      --bg-dark: #2c2f33;    /* Original Body */
      --bg-medium: #36393f;  /* Discord Medium Dark */
      --bg-light: #40444b;   /* Discord Input BG */
      --bg-embed: #2f3136;   /* Discord Embed BG */

      --text-primary: #dcddde; /* Discord Light Grey Text */
      --text-secondary: #b9bbbe;/* Discord Grey Text */
      --text-header: #ffffff;  /* White */
      --text-link: #00aff4;    /* Discord Link Blue */

      --accent: #5865F2;      /* Discord Blurple */
      --accent-hover: #4752c4; /* Darker Blurple */
      --border-color: #4f545c; /* Subtle border */

      --border-radius-small: 4px;
      --border-radius-medium: 6px;
      --border-radius-large: 8px;

      --spacing-unit: 8px;
    }

    * { /* Basic Reset */
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-primary);
      background-color: var(--bg-dark);
      color: var(--text-primary);
      line-height: 1.6;
      padding: calc(var(--spacing-unit) * 3); /* 24px */
    }

    h1 {
      color: var(--text-header);
      margin-bottom: calc(var(--spacing-unit) * 4); /* 32px */
      font-weight: 700;
      text-align: center;
      font-size: 2em; /* Larger title */
    }

    h2 { /* Style added for the Preview heading */
        color: var(--text-header);
        border-bottom: 1px solid var(--border-color);
        padding-bottom: var(--spacing-unit);
        margin-bottom: calc(var(--spacing-unit) * 3); /* 24px */
        font-size: 1.5em;
        font-weight: 500;
    }

    label {
      display: block;
      margin-bottom: var(--spacing-unit); /* 8px */
      font-weight: 500;
      color: var(--text-secondary);
    }

    /* --- Layout --- */
    .container {
      display: flex;
      gap: calc(var(--spacing-unit) * 3); /* 24px */
      flex-wrap: wrap;
      max-width: 1200px; /* Limit width on large screens */
      margin: 0 auto; /* Center container */
    }

    .form-section, .preview-section {
      flex: 1 1 450px; /* Allow slightly more base width */
      background-color: var(--bg-medium);
      padding: calc(var(--spacing-unit) * 3); /* 24px */
      border-radius: var(--border-radius-large);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Subtle shadow */
    }

    /* --- Form Elements --- */
    input[type="text"],
    input[type="url"], /* Style URL input like text */
    textarea {
      width: 100%;
      padding: calc(var(--spacing-unit) * 1.5); /* 12px */
      margin-top: 6px; /* Keep original margin top */
      margin-bottom: calc(var(--spacing-unit) * 2); /* 16px */
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-small);
      background-color: var(--bg-light);
      color: var(--text-primary);
      font-family: inherit;
      font-size: 1em;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    input[type="text"]:focus,
    input[type="url"]:focus,
    textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(88, 101, 242, 0.3); /* Subtle focus ring */
    }

    textarea {
        resize: vertical; /* Allow vertical resize */
        min-height: 80px;
    }

    input[type="color"] {
      padding: 0; /* Remove padding for color input */
      height: 40px; /* Match height roughly */
      width: 60px; /* Fixed width */
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-small);
      cursor: pointer;
      vertical-align: middle; /* Align with label */
      margin-top: 6px; /* Keep original margin */
      margin-bottom: 12px; /* Keep original margin */
      background-color: var(--bg-light);
    }

    /* Basic file input styling - can be complex, this is simple */
    input[type="file"] {
        color: var(--text-secondary);
        border: 1px dashed var(--border-color);
        padding: var(--spacing-unit);
        border-radius: var(--border-radius-small);
        background-color: var(--bg-light);
        width: 100%;
        margin-top: 6px; /* Keep original margin */
        margin-bottom: 12px; /* Keep original margin */
        cursor: pointer;
    }
    input[type="file"]::file-selector-button { /* Style the button part */
        padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5);
        background: var(--bg-medium);
        border: none;
        color: var(--text-primary);
        border-radius: var(--border-radius-small);
        margin-right: var(--spacing-unit);
        cursor: pointer;
        transition: background-color 0.2s ease;
    }
    input[type="file"]::file-selector-button:hover {
        background-color: var(--bg-darkest);
    }


    button {
      padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2.5); /* 12px 20px */
      background-color: var(--accent);
      border: none;
      color: white;
      border-radius: var(--border-radius-small);
      cursor: pointer;
      font-size: 1em;
      font-weight: 500;
      transition: background-color 0.2s ease, transform 0.1s ease;
      display: inline-block; /* Allow margin top */
      margin-top: var(--spacing-unit); /* Add some space above button */
    }

    button:hover {
      background-color: var(--accent-hover);
      transform: translateY(-1px); /* Subtle lift effect */
    }

    button:active {
      transform: translateY(0px); /* Click effect */
    }

    /* --- Embed Preview --- */
    .embed {
      border-left: 4px solid var(--accent); /* Use variable */
      padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2); /* 12px 16px */
      border-radius: var(--border-radius-medium);
      background-color: var(--bg-embed);
      word-wrap: break-word; /* Prevent long text overflow */
      margin-top: calc(var(--spacing-unit) * 2); /* Space below h2 */
    }

    .embed-title {
      font-weight: 700; /* Bolder title */
      font-size: 1.1em; /* Slightly larger title */
      color: var(--text-header);
      margin-bottom: var(--spacing-unit); /* Space below title */
    }

    .embed-description {
      margin-top: 0; /* Reset original margin */
      font-size: 0.95em; /* Slightly smaller desc */
      line-height: 1.5;
      color: var(--text-primary);
    }

    .embed-image {
      margin-top: calc(var(--spacing-unit) * 2); /* 16px */
      max-width: 100%;
      max-height: 300px; /* Limit image preview height */
      object-fit: contain; /* Prevent stretching */
      border-radius: var(--border-radius-small);
    }

    /* --- Responsiveness --- */
    @media (max-width: 900px) {
      .container {
        flex-direction: column; /* Stack columns on smaller screens */
      }
      .form-section, .preview-section {
        flex-basis: auto; /* Let them take full width */
      }
    }

    @media (max-width: 500px) {
      body {
        padding: calc(var(--spacing-unit) * 2); /* Reduce padding on very small screens */
      }
      h1 {
        font-size: 1.5em;
      }
      h2 {
        font-size: 1.25em;
      }
      input[type="text"],
      input[type="url"],
      textarea,
      button {
        font-size: 0.95em; /* Slightly smaller font in inputs */
      }
      .embed {
        padding: var(--spacing-unit); /* Reduce embed padding */
      }
    }

  </style>
</head>
<body>

<h1>Discord Embed Generator</h1>

<div class="container">
  <div class="form-section">
    <label>Webhook URL:</label>
    <input type="text" id="webhookUrl" placeholder="Paste your webhook URL here">

    <label>Username:</label>
    <input type="text" id="username" placeholder="Bot Username (Optional)">

    <label>Avatar URL:</label>
    <input type="text" id="avatarUrl" placeholder="Bot Avatar URL (Optional)">

    <label>Embed Title:</label>
    <input type="text" id="embedTitle" placeholder="Title">

    <label>Embed Description:</label>
    <textarea id="embedDescription" placeholder="Description"></textarea>

    <label>Embed Color:</label>
    <input type="color" id="embedColor" value="#5865F2"> <label>Attachment (any file type):</label>
    <input type="file" id="attachmentInput">

    <button onclick="sendMessage()">Send Message</button>
  </div>

  <div class="preview-section">
    <h2>Live Preview</h2> <div class="embed" id="embedPreview">
      <div class="embed-title" id="previewTitle">Title goes here</div>
      <div class="embed-description" id="previewDescription">Description goes here</div>
      <img id="previewImage" class="embed-image" style="display: none;">
    </div>
  </div>
</div>

<script>
  const embedTitle = document.getElementById('embedTitle');
  const embedDescription = document.getElementById('embedDescription');
  const embedColor = document.getElementById('embedColor');
  const previewTitle = document.getElementById('previewTitle');
  const previewDescription = document.getElementById('previewDescription');
  const previewImage = document.getElementById('previewImage');
  const embedPreview = document.getElementById('embedPreview');
  const attachmentInput = document.getElementById('attachmentInput');
  const usernameInput = document.getElementById('username'); // Get username input
  const avatarUrlInput = document.getElementById('avatarUrl'); // Get avatar input


  function updatePreview() {
    previewTitle.textContent = embedTitle.value || 'Title goes here';
    previewDescription.textContent = embedDescription.value || 'Description goes here';
    embedPreview.style.borderLeftColor = embedColor.value;
  }

  embedTitle.addEventListener('input', updatePreview);
  embedDescription.addEventListener('input', updatePreview);
  embedColor.addEventListener('input', updatePreview);

  attachmentInput.addEventListener('change', () => {
    const file = attachmentInput.files[0];
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function (e) {
        previewImage.src = e.target.result;
        previewImage.style.display = 'block';
      };
      reader.readAsDataURL(file);
    } else {
      previewImage.style.display = 'none';
    }
  });

  async function sendMessage() {
    const webhookUrl = document.getElementById('webhookUrl').value;
    const colorHex = embedColor.value.replace('#', '');
    const colorInt = parseInt(colorHex, 16);

    const embed = {
      title: embedTitle.value,
      description: embedDescription.value,
      color: colorInt
    };

    const formData = new FormData();
    const file = attachmentInput.files[0];

    const payload = {
      embeds: [embed]
    };

    // Add username and avatar_url only if they are provided
    if (usernameInput.value) {
      payload.username = usernameInput.value;
    }
    if (avatarUrlInput.value) {
      payload.avatar_url = avatarUrlInput.value;
    }


    formData.append("payload_json", JSON.stringify(payload));
    if (file) {
      formData.append("file", file);
    }

    try {
      const res = await fetch(webhookUrl, {
        method: 'POST',
        body: formData
      });

      if (res.ok) {
        alert('Message sent!');
      } else {
        // Attempt to read error response from Discord
        let errorText = 'Failed to send message. Check your webhook URL and try again.';
        try {
            const errorData = await res.json();
            if (errorData && errorData.message) {
                errorText += `\nDiscord API Error: ${errorData.message}`;
            }
        } catch (e) {
            // Ignore JSON parsing errors if the response wasn't JSON
        }
        alert(errorText);
      }
    } catch (err) {
      console.error(err);
      alert('Error sending message.');
    }
  }

  updatePreview(); // Call initially to set default preview state
</script>

</body>
</html>
