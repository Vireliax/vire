<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Discord Embed Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #2c2f33;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .form-section, .preview-section {
      flex: 1 1 400px;
      background: #23272a;
      padding: 20px;
      border-radius: 8px;
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 6px;
      margin-bottom: 12px;
      border: none;
      border-radius: 4px;
    }
    button {
      padding: 10px 16px;
      background: #7289da;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }
    .embed {
      border-left: 4px solid #7289da;
      padding: 16px;
      border-radius: 6px;
      background-color: #2f3136;
    }
    .embed-title {
      font-weight: bold;
      font-size: 16px;
    }
    .embed-description {
      margin-top: 8px;
    }
    .embed-image {
      margin-top: 10px;
      max-width: 100%;
      border-radius: 4px;
    }
  </style>
</head>
<body>

<h1>Discord Embed Generator</h1>

<div class="container">
  <div class="form-section">
    <label>Webhook URL:</label>
    <input type="text" id="webhookUrl" placeholder="Paste your webhook URL here">

    <label>Username:</label>
    <input type="text" id="username" placeholder="Bot Username">

    <label>Avatar URL:</label>
    <input type="text" id="avatarUrl" placeholder="Bot Avatar URL">

    <label>Embed Title:</label>
    <input type="text" id="embedTitle" placeholder="Title">

    <label>Embed Description:</label>
    <textarea id="embedDescription" placeholder="Description"></textarea>

    <label>Embed Color:</label>
    <input type="color" id="embedColor" value="#7289da">

    <label>Attachment (any file type):</label>
    <input type="file" id="attachmentInput">

    <button onclick="sendMessage()">Send Message</button>
  </div>

  <div class="preview-section">
    <h2>Live Preview</h2>
    <div class="embed" id="embedPreview">
      <div class="embed-title" id="previewTitle">Title goes here</div>
      <div class="embed-description" id="previewDescription">Description goes here</div>
      <img id="previewImage" class="embed-image" style="display: none;">
    </div>
  </div>
</div>

<script>
  const embedTitle = document.getElementById('embedTitle');
  const embedDescription = document.getElementById('embedDescription');
  const embedColor = document.getElementById('embedColor');
  const previewTitle = document.getElementById('previewTitle');
  const previewDescription = document.getElementById('previewDescription');
  const previewImage = document.getElementById('previewImage');
  const embedPreview = document.getElementById('embedPreview');
  const attachmentInput = document.getElementById('attachmentInput');

  function updatePreview() {
    previewTitle.textContent = embedTitle.value || 'Title goes here';
    previewDescription.textContent = embedDescription.value || 'Description goes here';
    embedPreview.style.borderLeftColor = embedColor.value;
  }

  embedTitle.addEventListener('input', updatePreview);
  embedDescription.addEventListener('input', updatePreview);
  embedColor.addEventListener('input', updatePreview);

  attachmentInput.addEventListener('change', () => {
    const file = attachmentInput.files[0];
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function (e) {
        previewImage.src = e.target.result;
        previewImage.style.display = 'block';
      };
      reader.readAsDataURL(file);
    } else {
      previewImage.style.display = 'none';
    }
  });

  async function sendMessage() {
    const webhookUrl = document.getElementById('webhookUrl').value;
    const username = document.getElementById('username').value;
    const avatarUrl = document.getElementById('avatarUrl').value;
    const colorHex = embedColor.value.replace('#', '');
    const colorInt = parseInt(colorHex, 16);

    const embed = {
      title: embedTitle.value,
      description: embedDescription.value,
      color: colorInt
    };

    const formData = new FormData();
    const file = attachmentInput.files[0];

    const payload = {
      username,
      avatar_url: avatarUrl,
      embeds: [embed]
    };

    formData.append("payload_json", JSON.stringify(payload));
    if (file) {
      formData.append("file", file);
    }

    try {
      const res = await fetch(webhookUrl, {
        method: 'POST',
        body: formData
      });

      if (res.ok) {
        alert('Message sent!');
      } else {
        alert('Failed to send message. Check your webhook URL and try again.');
      }
    } catch (err) {
      console.error(err);
      alert('Error sending message.');
    }
  }

  updatePreview();
</script>

</body>
</html>
